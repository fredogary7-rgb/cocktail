<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Retrait</title>

<style>
body {
    font-family: 'Poppins', sans-serif;
    background: #f3f4f6;
    margin: 0;
}
.header {
    background: white;
    padding: 25px;
    color: white;
}
.soldes {
    font-size: 30px;
    font-weight: bold;
}
.sous-solde {
    font-size: 18px;
    font-weight: bold;
    color: #ffd700;
}
.card {
    background: white;
    margin: 20px;
    padding: 20px;
    border-radius: 12px;
}
input {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border-radius: 8px;
    border: 1px solid #ccc;
}
.btn {
    background: black;
    color: white;
    padding: 15px;
    width: 90%;
    margin: 20px auto;
    text-align: center;
    display: block;
    border-radius: 25px;
    font-weight: bold;
    border: none;
}
.portefeuille {
    background: #f1f1f1;
    padding: 12px;
    border-radius: 8px;
    margin-top: 12px;
}

/* ===== CONSEILS DE RETRAIT ===== */

.retreat-card {
    background:#fff;
    padding:18px 20px;
    border-radius:12px;
    margin:15px;
    box-shadow:0 3px 8px rgba(0,0,0,0.08);
}

.retreat-title {
    font-size:17px;
    font-weight:700;
    margin-bottom:12px;
    color:#222;
}

.retreat-list {
    margin:0;
    padding-left:18px;
    color:#ff2d00;
    font-size:14px;
    line-height:22px;
}

.retreat-list li {
    margin-bottom:12px;
}
</style>

</head>
<body>

<div class="account-info" style="background:#ff2d00; color:#fff; padding:20px 0;
     display:flex; justify-content:space-around; border-radius:0 0 20px 20px;">

    <div style="text-align:center;">
        <small style="color:#ccc; font-size:14px;">Solde du compte</small>
        <div style="font-size:22px; font-weight:bold;">
            {{ "{:,.0f}".format(solde_total).replace(",", " ") }} XOF
        </div>
    </div>

    <div style="text-align:center;">
        <small style="color:#ccc; font-size:14px;">Solde retirable</small>
        <div style="font-size:22px; font-weight:bold;">
            {{ "{:,.0f}".format(solde_retraitable).replace(",", " ") }} XOF
        </div>
    </div>

</div>

<form method="POST">

    <div class="card">
        <h3>Montant du retrait</h3>

        <input
            type="number"
            name="montant"
            id="montant"
            placeholder="Entrez le montant"
            required>

        <p id="netText" style="color:red;font-weight:bold;">
            R√©ception r√©elle : FCFA 0 ‚Äî imp√¥t : 15%
        </p>

        <h3>Compte de retrait</h3>

        <div class="portefeuille" onclick="window.location.href='/ajouter_portefeuille'">
            {{ user.wallet_country }} ‚Ä¢ {{ user.wallet_operator }}<br>
            <strong>{{ user.wallet_number }}</strong>
        </div>
    </div>

    <button class="btn" type="submit">Retirer maintenant</button>

</form>

<!-- ===== CONSEILS DE RETRAIT ===== -->
<div class="retreat-card">
    <div class="retreat-title">Conseils de retrait</div>

    <ol class="retreat-list">
        <li>Le montant minimum de retrait est de 1000 FCFA.</li>

        <li>Il n'y a pas de limite de temps pour les retraits, mais trois retraits maximum sont autoris√©s par jour.</li>

        <li>18 % des frais de retrait serviront √† couvrir les pertes li√©es au produit.</li>

        <li>Les retraits sont g√©n√©ralement disponibles sous 2 heures, mais ce d√©lai peut atteindre 24 heures dans des circonstances exceptionnelles.</li>

        <li>Veuillez renseigner correctement les informations de votre compte de retrait. Toute information incorrecte entra√Ænera l'√©chec du retrait.</li>

        <li>Afin de prot√©ger les droits et les int√©r√™ts de la plateforme et de ses membres, vous devez investir avant de pouvoir retirer des fonds.</li>
    </ol>
</div>
<!-- üî• CALCUL AUTOMATIQUE DU MONTANT NET -->
<script>
document.getElementById("montant").addEventListener("input", function() {
    let montant = parseFloat(this.value);
    if (isNaN(montant) || montant <= 0) {
        document.getElementById("netText").innerHTML =
            "R√©ception r√©elle : FCFA 0 ‚Äî imp√¥t : 15%";
        return;
    }

    let taxe = montant * 0.15;
    let net = montant - taxe;

    document.getElementById("netText").innerHTML =
        "R√©ception r√©elle : <b>FCFA " + net.toLocaleString('fr-FR') +
        "</b> ‚Äî imp√¥t : 15%";
});
</script>

</body>
</html>
